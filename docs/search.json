[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "GEOG0030 Geocomputation 2023-2024",
    "section": "",
    "text": "Module Introduction"
  },
  {
    "objectID": "index.html#welcome",
    "href": "index.html#welcome",
    "title": "GEOG0030 Geocomputation 2023-2024",
    "section": "Welcome",
    "text": "Welcome\nWelcome to Geocomputation. This module will introduce you both to the principles of spatial analysis as well as provide you with a comprehensive introduction to the use of programming. Over the next ten weeks, you will learn about the theory, methods and tools of spatial analysis through relevant case studies. We will start by using QGIS before moving to the R programming language. You will learn how to find, manage and clean spatial, demographic and socioeconomic datasets, and then analyse them using core spatial and statistical analysis techniques."
  },
  {
    "objectID": "index.html#moodle",
    "href": "index.html#moodle",
    "title": "GEOG0030 Geocomputation 2023-2024",
    "section": "Moodle",
    "text": "Moodle\nMoodle is the central point of contact for GEOG0030 and it is where all important information will be communicated such as key module and assessment information. This workbook contains links to all reading material as well as the content of all computer tutorials"
  },
  {
    "objectID": "index.html#module-overview",
    "href": "index.html#module-overview",
    "title": "GEOG0030 Geocomputation 2023-2024",
    "section": "Module overview",
    "text": "Module overview\nThe topics covered over the next ten weeks are:\n\n\n\nWeek\nSection\nTopic\n\n\n\n\n1\nFoundational Concepts\nGeocomputation: An Introduction\n\n\n2\nFoundational Concepts\nGIScience and GIS software\n\n\n3\nFoundational Concepts\nCartography and Visualisation\n\n\n4\nFoundational Concepts\nProgramming for Data Analysis\n\n\n5\nFoundational Concepts\nProgramming for Spatial Analysis\n\n\n\nReading week\nReading week\n\n\n6\nCore Spatial Analysis\nAnalysing Spatial Patterns I: Geometric Operations and Spatial Queries\n\n\n7\nCore Spatial Analysis\nAnalysing Spatial Patterns II: Spatial Autocorrelation\n\n\n8\nCore Spatial Analysis\nAnalysing Spatial Patterns III: Point Pattern Analysis\n\n\n9\nAdvanced Spatial Analysis\nRasters, Zonal Statistics and Interpolation\n\n\n10\nAdvanced Spatial Analysis\nTransport Network Analysis"
  },
  {
    "objectID": "index.html#troubleshooting",
    "href": "index.html#troubleshooting",
    "title": "GEOG0030 Geocomputation 2023-2024",
    "section": "Troubleshooting",
    "text": "Troubleshooting\nSpatial analysis can yield fascinating insights into geographical relationships, albeit at times it can be challenging, particularly when we combine this with learning how to program at the same time. You will most likely encounter many error messages, experience software crashes, and spend hours to identify bugs in your code. However, the rewards of learning how to programmatically solve complex spatial problems will be very much worth it in the end.\nIf you need specific assistance with this course please:\n\nAsk a question at the end of a lecture or during the computer practical.\nCheck the Moodle assessment tab for queries relating to this module’s assessment.\nAttend the Department’s Coding Therapy sessions that are run on a weekly basis.\nAttend the scheduled Geocomputation Additional Support Hours.\n\nIf after pursuing all these avenues you still need help, you can book a slot in our Academic Support and Feedback hours. You can use this time to discuss a geographical concept in relation to the material, assessment or for any personal matters relevant to the completion of the module."
  },
  {
    "objectID": "index.html#acknowledgements",
    "href": "index.html#acknowledgements",
    "title": "GEOG0030 Geocomputation 2023-2024",
    "section": "Acknowledgements",
    "text": "Acknowledgements\nThis year’s workbook is updated from and compiled using:\n\nThe GEOG0030: Geocomputation 2022-2023 workbook by Justin van Dijk\nThe GEOG0030: Geocomputation 2021-2022 workbook by Justin van Dijk\nThe GEOG0030: Geocomputation 2021-2021 workbook by Jo Wilkin"
  },
  {
    "objectID": "index.html#major-updates",
    "href": "index.html#major-updates",
    "title": "GEOG0030 Geocomputation 2023-2024",
    "section": "Major updates",
    "text": "Major updates\n\n\n\n\n\n\nThis year’s update features the following major updates:\n\nFull rewrite of the workbook using Quarto.\nUpdate to using exclusively Census 2021 (spatial) data where possible.\nRewriting sections relying on deprecated core packages: raster, rgdal, rgeos.\nMove to geopackage over shapefile where possible."
  },
  {
    "objectID": "01-introduction.html#slides-w01",
    "href": "01-introduction.html#slides-w01",
    "title": "1  Geocomputation: An Introduction",
    "section": "1.1 Lecture slides",
    "text": "1.1 Lecture slides\nThe slides for this week’s lecture can be downloaded here: [Link]"
  },
  {
    "objectID": "01-introduction.html#reading-w01",
    "href": "01-introduction.html#reading-w01",
    "title": "1  Geocomputation: An Introduction",
    "section": "1.2 Reading list",
    "text": "1.2 Reading list\n\nEssential readings\n\nBrundson, C. and Comber, A. 2020. Opening practice: Supporting reproducibility and critical spatial data science. Journal of Geographical Systems 23: 477–496. [Link]\nLongley, P. et al. 2015. Geographic Information Science & Systems, Chapter 1: Geographic Information: Science, Systems, and Society. [Link]\nSingleton, A. and Arribas-Bel, D. 2019. Geographic Data Science. Geographical Analysis. [Link]\n\n\n\nSuggested readings\n\nMiller, H. and Goodchild, M. 2015. Data-driven geography. GeoJournal 80: 449–461. [Link]\nGoodchild, M. 2009. Geographic information systems and science: Today and tomorrow. Annals of GIS 15(1): 3-9. [Link]\nWorobey, M. et al. 2022. The Huanan Seafood Wholesale Market in Wuhan was the early epicenter of the COVID-19 pandemic. Science 377(6609): 951-959. [Link]"
  },
  {
    "objectID": "01-introduction.html#getting-started",
    "href": "01-introduction.html#getting-started",
    "title": "1  Geocomputation: An Introduction",
    "section": "1.3 Getting started",
    "text": "1.3 Getting started\nOver the next few weeks, we will be taking a closer look at many of the foundational concepts that will ultimately enable you to confidently and competently analyse spatial data using both programming and GIS software. You will further learn how to plan, structure and conduct your own spatial analysis using programming – whilst making decisions on how to best present your work, which is a crucial aspect of any type of investigation but of particular relevance to your dissertation."
  },
  {
    "objectID": "01-introduction.html#software",
    "href": "01-introduction.html#software",
    "title": "1  Geocomputation: An Introduction",
    "section": "1.4 Software",
    "text": "1.4 Software\nThis module primarily uses the R programming language, although we start by using QGIS in the next two weeks to give you a basic foundation in the principles of spatial analysis.\n\n\n\n\n\n\nPlease follow the instructions below to install both R and QGIS onto your own personal computer. If you cannot install the software on your personal computer or you are not planning to bring your own laptop to the computer practicals, please refer to the UCL Desktop and RStudio Server section below. Please make sure that you have access to a working installation of QGIS and R (including relevant packages) before the first hands-on practical session next week.\n\n\n\n\n1.4.1 QGIS Installation\nQGIS is an open-source graphic user interface GIS with many community developed add-on packages (or plugins) that provide additional functionality to the software. You can download and install QGIS on your personal machine by going to the QGIS website: [Link].\n\n\n\n\n\n\nWe recommend installing the Long Term Release (QGIS 3.28 LTR) as this version should be the most stable version. For Windows users: be aware that the QGIS installation can be a little slow.\n\n\n\nAfter installation, start QGIS to see if the installation was successful.\n\n\n1.4.2 R and RStudio Installation\nR is both a programming language and software environment - in the form of RStudio - originally designed for statistical computing and graphics. R’s great strength is that it is open-source, can be used on any computer operating system, and is free for anyone to use and contribute to. Because of this, it is rapidly becoming the statistical language of choice for many academics and has a very large user community with people constantly contributing new packages to carry out all manner of statistical, graphical, and importantly for us, geographical tasks.\nInstalling R takes a few relatively simple steps involving two programmes. First there is the R programme itself. Follow these steps to get it installed on your computer:\n\nNavigate in your browser to your nearest CRAN mirror: [Link]\nIf you use a Windows computer, click on Download R for Windows. Then click on base. Download and install R 4.3.x for Windows. If you use a Mac computer, click on Download R for macOS and download and install R-4.3.x.arm64.pkg for Apple silicon Macs and R-4.3.x.x86_64.pkg for older Intal Macs.\n\nThat is it! You now have installed the latest version of R on your own machine. However, to make working with R a little bit easier we also need to install something called an Integrated Development Environment (IDE). We will use RStudio:\n\nNavigate to the official webpage of RStudio: [Link]\nDownload and install RStudio Desktop on your computer (free version!)\n\nAfter this, start RStudio to see if the installation was successful and no errors are shown after start up.\n\n\n1.4.3 UCL Desktop and RStudio Server\nAs an alternative to installing QGIS and R with RStudio onto your personal device, there are some other options. Firstly, both programmes are available through Desktop@UCL Anywhere as well as all UCL computers on campus. In case of R, there is also an RStudio server version available which you can access through your web browser: [Link]\nYou should be able to log in with your normal UCL username and password. After logging in, you should see the RStudio interface appear.\n\n\n\n\n\nFigure 1.1: The RStudio Server interface. [Enlarge image]\n\n\n\n\n\n\n\n\n\n\nIf it is the first time you log on to RStudio server you may only see the RStudio interface appear once you have clicked on the start a new session button. More importantly: if you are not on campus, RStudio server will only work with an active Virtual Private Network (VPN) connection that links your personal computer into UCL’s network. Details on setting up a VPN connection can be found in UCL’s VPN connection guides: [Link]\n\n\n\n\n\n1.4.4 R package installation\nNow we have installed or have access to QGIS and R, we need to customise R. Many useful R function come in packages, these are free libraries of code written and made available by other by R users. This includes packages specifically developed for data cleaning, data wrangling, visualisation, mapping, and spatial analysis. To save us some time, we will install all R packages that we will need over the next ten weeks in one go. Now copy and paste the following code into the console window. You can execute the code by hitting Enter. This may take a while.\n\n# install packages\ninstall.packages(c(\"tidyverse\", \"sf\", \"tmap\", \"terra\", \"dodgr\"))\n\n\n\n\n\n\n\nEven if you have used R or RStudio Server before and already installed some of the packages in the above list, do re-install all packages by running the code above to make sure you have the latest versions. Legacy installations that have not been updated may lay lead to problems when going through the tutorials.\n\n\n\nOnce you have installed the packages, we need to check whether we can in fact load them into our R session. Copy and paste the following code into the console, and execute by hitting Enter again.\n\n# load packages\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(tmap)\nlibrary(terra)\nlibrary(dodgr)\n\nYou will see some information printed to your console but as long as you do not get a message that is similar to Error: package or namespace load failed for &lt;packagename&gt; or Error: package '&lt;packagename' could not be loaded all should be fine.\n\n\n1.4.5 A note on ArcGIS\nArcGIS Pro is the main commercial GIS software that you may have already used or seen/heard about through other modules or even job adverts. We do not use ArcGIS Pro in our Practicals for several reasons:\n\nComputing requirements for ArcGIS Pro are substantial and it only operates on the Windows Operating System. For Mac or Linux users, using ArcGIS Pro would require using either a Virtual Machine, Docker Installation, or running a copy of Windows OS on a separate partition of your hard drive.\nArcGIS is proprietary software, which means you need a license to use the software. For those of us in education, the University covers the cost of this license, but when you leave, you will need to pay for a personal license to continue using the software and repeat any analysis you have used the software for.\nWhilst ArcPro can use pure Python (and even R) as a programming language within it through scripts and notebooks, it primarily relies on its own ArcPy and ArcGIS API for Python packages to run the in-built tools and analytical functions. To use these packages, you still need a license which makes it difficult to share your code with others if they do not have their own ArcGIS license.\n\nRecent developments in the ArcPro software, however, does make it an attractive tool for spatial data science and quantitative geography: it has cross-user functionality, from data analysts who like to use a tool called Notebooks for their code development, to those focused more on cartography and visualisation with in-built bridges to Adobe’s Creative Suite. We therefore do not want to put you off looking into ArcGIS in the future, but for this course, we want to ensure the reproducibility of your work."
  },
  {
    "objectID": "01-introduction.html#byl-w01",
    "href": "01-introduction.html#byl-w01",
    "title": "1  Geocomputation: An Introduction",
    "section": "1.5 Before you leave",
    "text": "1.5 Before you leave\nYou should now be all ready to go with the computer practicals the coming week. Nice and easy. That is it for this week!"
  },
  {
    "objectID": "02-GIScience.html#slides-w01",
    "href": "02-GIScience.html#slides-w01",
    "title": "2  GIScience and GIS software",
    "section": "2.1 Lecture slides",
    "text": "2.1 Lecture slides\nThe slides for this week’s lecture can be downloaded here: [Link]"
  },
  {
    "objectID": "02-GIScience.html#reading-w02",
    "href": "02-GIScience.html#reading-w02",
    "title": "2  GIScience and GIS software",
    "section": "2.2 Reading list",
    "text": "2.2 Reading list\n\nEssential readings\n\nLongley, P. et al. 2015. Geographic Information Science & Systems, Chapter 2: The Nature of Geographic Data. [Link]\nLongley, P. et al. 2015. Geographic Information Science & Systems, Chapter 3: Representing Geography. [Link]\nLongley, P. et al. 2015. Geographic Information Science & Systems, Chapter 7: Geographic Data Modeling. [Link]\n\n\n\nSuggested readings\n\nGoodchild, M. and Haining, R. 2005. GIS and spatial data analysis: Converging perspectives. Papers in Regional Science 83(1): 363–385. [Link]\nSchurr, C., Müller, M. and Imhof, N. 2020. Who makes geographical knowledge? The gender of Geography’s gatekeepers. The Professional Geographer 72(3): 317-331. [Link]\nYuan, M. 2001. Representing complex geographic phenomena in GIS. Cartography and Geographic Information Science 28(2): 83-96. [Link]"
  },
  {
    "objectID": "02-GIScience.html#simple-digitisation-of-spatial-features",
    "href": "02-GIScience.html#simple-digitisation-of-spatial-features",
    "title": "2  GIScience and GIS software",
    "section": "2.3 Simple digitisation of spatial features",
    "text": "2.3 Simple digitisation of spatial features\nTo get spatial features in a digital form, they need to be digitised. Let’s take a quick look in this first part of the practical at a straight-forward example of digitising the river Thames in London.\n\n\n\n\n\nFigure 2.1: The river Thames. [Enlarge image]\n\n\n\n\nWe are going to use a very simple online tool that allows us to create digital data and export the data we create as raw files:\n\nHead to geojson.io.\nIn the bottom left-hand corner, select Satellite Streets as your map option.\nNext, click on the Draw Linestring tool which you can find on the right hand side of the screen. You can hover over the icons to get the names of each tool.\nNow digitise the river Thames. Simply click from a starting point on the left- or right-hand side of the map, and digitise the river.\nOnce you are done, double-click your final point to end your line.\nYou can click on the line and select Info in the pop-up screen to find out how long the line is.\nYou can export your data using the Save menu."
  },
  {
    "objectID": "02-GIScience.html#population-change-in-london",
    "href": "02-GIScience.html#population-change-in-london",
    "title": "2  GIScience and GIS software",
    "section": "2.4 Population change in London",
    "text": "2.4 Population change in London\nThe second part of this practical will introduces you to attribute joins followed by creating a choropleth map. You will be using different types of joins throughout this practical, this module in general, and probably the rest of your career, so it is incredibly important that you understand how these work.\n\n\n\n\n\n\nThe datasets you will create in this practical will be used in next week’s practical, so make sure to follow every step and save your data carefully.\n\n\n\nWhen using spatial data, there is generally a very specific workflow that you will need to go through and, believe it or not, the majority of this is not actually focused on analysing your data. One of the most often-quoted GIS-related unreferenced ‘fact’ is that anyone working with spatial data will spend 80% of their time simply finding, retrieving, managing and processing the data before any analysis can be done.\nOne of the reasons behind this need for a substantial amount of processing is that the data you often need to use is almost never in the format that you require for analysis. For example, for our investigation, there is not a ‘ready-made’ spatial population dataset (i.e. population shapefile) we can download to explore population change across England:\n\n\n\n\n\nFigure 2.2: A quick Google search shows that finding a shapefile of England’s population is not straightforward. [Enlarge image]\n\n\n\n\nInstead, we need to go and find the raw datasets and create the data layers that we want. As a result, before beginning any spatial analysis project, it is best-practice to think through what end product you will ultimately need for your analysis.\nA typical spatial analysis workflow usually looks something like this:\n\n\n\n\n\n\n\nStep\nAction\n\n\n\n\nidentify\nThink about the data you need to complete your analysis.\n\n\nfind\nFind the data that matches your requirements.\n\n\ndownload\nStore the data on your computer in the right folder.\n\n\nclean\nAssess whether the data needs pre-processing before moving to QGIS or R.\n\n\nload\nLoad the cleaned data into QGIS, R, or software of choice.\n\n\nprocess\nPrepare the data so that they are ready for analysis (e.g. joining, aggregating).\n\n\nanalyse\nExecute the actual analysis that you set out to do.\n\n\nvisualise\nCreate graphs and maps where appropriate.\n\n\n\nAs you can see, the analysis and visualisation parts only make up the last steps of the workflow and instead, the workflow is very top-heavy with data management.\n\n\n\n\n\n\nVery often in GIS-related courses you will be given pre-processed datasets. Because data management is an essential part of your workflow, we will clean (the majority of) our data from the get-go. This will help you understand the processes that you will need to go through in the future as you search for and download your own data as well as deal with the data first-hand before loading it into our GIS software.\n\n\n\n\n2.4.1 Setting the scene\nIn this part of the practical, we will investigate how the population in London has changed over time. Understanding population change - over time and space - is spatial analysis at its most fundamental. We can understand a lot just from where population is growing or decreasing, including thinking through the impacts of these changes on the provision of housing, education, health and transport infrastructure.\nToday we will look at population in London in the Census years of 2011 and 2021 at the Lower Super Output Area scale that we can also use within our future analysis projects.\n\n\n\n\n\n\nWe will use the population dataset we create today to normalise other datasets in the module. Why? When we record events created by humans, there is often a population bias: simply, more people in an area will by probability lead to a higher occurrence of said event, such as crime. We will look at this in greater detail next week.\n\n\n\n\n\n2.4.2 Finding data\nIn the UK, finding authoritative data on population and Administrative Geography boundaries is increasingly straight-forward. Over the last decade, the UK government has opened up many of its datasets as part of an Open Data precedent that began in 2010 with the creation of data.gov.uk and the Open Government Licence (the terms and conditions for using data).\n\n\n\n\n\n\nData.gov.uk is the UK government’s central database that contains open data that the central government, local authorities and public bodies publish. This includes, for example, aggregated census and health data – and even government spending. In addition to this central database, there are other authoritative databases run by the government and/or respective public bodies that contain either a specific type of data (e.g. census data, crime data) or a specific collection of datasets (e.g. health data from the NHS, data about London). Some portals are less up-to-date than others, so it is wise to double-check with the ‘originators’ of the data to see if there are more recent versions.\n\n\n\nFor our practical, we will access data from two authoritative data portals:\n\nFor our administrative boundaries, we will download the spatial data from the Open Geography Portal.\nFor our population data, we will download attribute data directly from the Office of National Statistics (ONS).\n\n\n\n2.4.3 Housekeeping\nBefore we download our data, it is important to establish an organised file systems that we will use throughout the module. Create a GEOG0030 folder in your Documents folder on your computer and within your GEOG0030 folder, create the following subfolders:\n\n\n\n\n\n\n\nFolder name\nPurpose\n\n\n\n\nraw\nTo store all your raw data files that have not yet been cleaned and processed.\n\n\ndata\nTo store data files that have been cleaned and processed.\n\n\noutput\nTo store all your final output data files and maps.\n\n\n\n\n\n2.4.4 Downloading spatial data\nWe will start by downloading the administrative geography boundaries for England and Wales:\n\nNavigate to the Open Geography Portal: [Link]\nIn the main menu go to Boundaries -&gt; Census Boundaries  -&gt; Lower Layer Super Output Areas -&gt; 2011 Boundaries.\nClick on LSOA (Dec 2011) Boundaries Generalised Clipped BGC EW V3.\nClick on Download -&gt; Download GeoPackage.\n\nRepeat the above process to also download the 2021 LSOA boundaries: Lower Layer Super Output Areas (2021) Boundaries EW BGC. Make sure you download the Generalised (20m) version.\n\n\n\n\n\n\nAdministrative geographies are a way of dividing the country into smaller sub-divisions or areas that correspond with the area of responsibility of local authorities and government bodies. These administrative sub-divisions and their associated geography have several important uses, including assigning electoral constituencies and serving as a mechanism for collecting census data. These geographies are updated as populations evolve and as a result the boundaries of the administrative geographies are subject to either periodic or occasional change. This is why we need to download both 2011 and 2021 LSOA boundaries. More details on the administrative geographies of the UK can be found on the website of the Office for National Statistics.\n\n\n\nNow open your GEOG0030/data/raw/ folder and create a new folder called boundaries. Rename the two files you just downloaded to LSOA2011.gpkg and LSOA2021.gpkg, respectively, and copy these into your boundaries folder.\n\n\n\n\n\n\nYou may have used spatial data before and noticed that we did not download a collection of files known as a shapefile but a geopackage instead. Whilst shapefiles are still being used, and you will most likely come across them at some point in your career, the more modern, more portable, and open-source geopackage should be your spatial data format of choice where possible. Have a look at this article on towardsdatascience.com for an excellent explanation on why one should use geopackage files instead of shapefiles: [Link]\n\n\n\n\n\n2.4.5 Downloading population data\nFor our population data, we will use the 2011 and 2021 Census population counts that are made available by the ONS through Nomis.\n\nNavigate to the Nomis portal: [Link]\nIn the main menu go to Census -&gt; 2011 Census -&gt; Lower Layer Super Output Areas -&gt; 2011 Boundaries.\nClick on Key Statistics.\nClick on KS101EW - Usual resident population.\nClick on Query data on the left-hand side of the window.\nSelect Geography and set 2011 super output areas - lower layer to All.\nClick on Download data.\nOnce the data is ready for download, download the file to your computer.\n\nTo get the 2011 Census population counts, you should:\n\nNavigate to the Nomis portal: [Link]\nIn the main menu of the Nomis portal go to Census -&gt; 2011 Census -&gt; Lower Layer Super Output Areas -&gt; 2021 Boundaries.\nClick on Topic Summaries.\nClick on TS007A - Age by five-year age bands.\nClick on Query data on the left-hand side of the window.\nSelect Geography and set 2021 super output areas - lower layer to All.\n\nClick on Download data.\nOnce the data is ready for download, download the file to your computer.\n\nIn your GEOG0030/data/raw/ folder, now create a new folder called population and copy the two Excel files to the newly created population folder. Rename the files you downloaded to: LSOA2011_population.xlsx and LSOA2021_population.xlsx, respectively.\n\n\n2.4.6 Cleaning data\nWhen you open up any of the LSOA spreadsheets in Excel, you will notice that some additional rows of information are contained at the top of each of these files. This extra information will confuse QGIS and we therefore need to do a bit of data cleaning. To reduce the chance of errors in later stages, we will also save the data in csv format.\n\n\n\n\n\n\ncsv stands for comma (or character) separated values. A csv file can be thought of as stripped-down Excel spreadsheet in which every column of data is separated by a comma. If you open a csv file within Excel, however, it will look “normal”. The advantage of using csv files is that it (should) make it easier to read data into QGIS and R as less things can go wrong.\n\n\n\n\n2.4.6.1 London population in 2011\nOpen the LSOA2011_population.xlsx file in Excel. We have two main columns: one with identifying information that distinguishes each area from one another and one with population counts. In addition, there are some less informative rows at the top of the spreadsheet.\nLooking at this we need to take two steps. First, we need to remove the top rows that we do not need. Second, we need to spread the information in the first column into two columns. Currently, this columns contains unique area codes as well as unique area names. However, to be able to effectively link our population data to our spatial data, the codes are much more reliable and much less likely to cause issues than the area names. Putting area codes and area names into separate columns will help us sorting this out.\n\nOpen a new Excel spreadsheet. From the LSOA2011_population.xlsx spreadsheet, cut (Edit -&gt; Cut) all cells from columns A to B and rows 9 to 4,651 into this new spreadsheet. Row 4,651 denotes the end of the majority of the Greater London LSOAs.\nNow we need to identify the missing LSOAs that were not kept at the top of the file with the other London LSOAs, probably because these LSOAs got introduced at a later point in time. Unfortunately, we can only do this manually by searching for the name of each of the London Boroughs and subsequently cutting the associated LSOAs from the spreadsheet and pasting these into the second spreadsheet.\nGo to Edit -&gt; Find -&gt; Find. Type in City of London. Cut (Edit -&gt; Cut) the two rows of data (City of London 001F, City of London 001G) and paste these at the bottom of the second spreadsheet.\nRepeat this process to find all missing LSOAs for all 32 London Boroughs. ::: { .callout-warning} Not all of the 32 London Boroughs have missing LSOAs (e.g. Kensington and Chelsea) whilst in other cases the missing LSOAs are not grouped together (e.g. Wandsworth and Southwark) so after cutting the data, try Find again to make sure you did not miss any LSOAs. Once you are done cutting and pasting, you should have 4,836 rows of data in your second spreadsheet. :::\n\n\n\n\nLondon Boroughs\n\n\n\n\n\nWestminster\nSutton\n\n\nKensington and Chelsea\nCrodyon\n\n\nHammersmith and Fulham\nBromley\n\n\nWandsworth\nLewisham\n\n\nLambeth\nGreenwich\n\n\nSouthwark\nBexley\n\n\nTower Hamlets\nHavering\n\n\nHackney\nBarking and Dagenham\n\n\nIslington\nRedbridge\n\n\nCamden\nNewham\n\n\nBrent\nWaltham Forest\n\n\nEaling\nHaringey\n\n\nHounslow\nEnfield\n\n\nRichmond upon Thames\nBarnet\n\n\nKingston upon Thames\nHarrow\n\n\nMerton\nHillingdon\n\n\n\n\nOnce you copied all the rows of data, rename the columns in the new spreadsheet to lsoa and pop2011, respectively.\nCut all the data from the pop2011 column that is stored in column B and paste these into column C. You now should have a column without any data between the lsoa and pop2011 columns.\nHighlight the entire lsoa column and in the Data menu click on the Text to Columns menu button.\n\n\n\n\n\n\nFigure 2.3: Highlight the lsoa columns and find the Text to Columns menu option. Note that column B does not contain any data. [Enlarge image]\n\n\n\n\n\n\n\n\n\n\nNote that the Text to Columns function might be elsewhere in the menu depending on your version of Excel and/or your operating system.\n\n\n\n\nIn the Text to Columns menu, select the Delimited radio button and click Next.\nUncheck the checkbox for Tab and put : (colon) into the Other box. Click Finish.\nChange the name of the lsoa column to lsoa11_code and change the name of the new column to lsoa11_name.\n\n\n\n\n\n\nFigure 2.4: Your spreadsheet should now look something like this. [Enlarge image]\n\n\n\n\n\nOne thing that might cause problems when we try to link the population data to the spatial data is that there are still spaces contained in the lsoa11_code column. This is not directly noticeable as these spaces are white space characters at the end of the LSOA codes without any other characters following it (i.e. trailing spaces. This may seem trivial, but computer language is very precise so we need to remove these. We can do this by highlighting the entire lsoa11_code column and in the Home menu opting for Replace under the Find & Select menu.\n\n\n\n\n\n\nFigure 2.5: Accessing the Replace option. [Enlarge image]\n\n\n\n\n\nIn the Find what box put in a singular white space, using the spacebar on your computer, keep the Replace with box empty, and click on Replace all. You should get a message that 4,835 replacements have been made.\nOne further bit of formatting that you must do before saving your data is to format our population field. At the moment, you will see that there are commas separating the thousands within our values. If we leave these commas in our values, QGIS will read them as decimal points, creating decimal values of our population. There are many points at which we could resolve this issue, but the easiest point is now - we will strip our population values of the commas and set them to integer (whole numbers) values. To format the pop2011 column, higlight the entire column and right-click on the C cell. Click on Format Cells and set the Cells to Number with 0 decimal places. You should see that the commas are now removed from your population values.\nSave your spreadsheet as a csv file into your data folder as LSOA2011_population.csv.\n\n\n\n\n\n\n\nAfter saving the file Excel might give you a warning along the lines of Possible data loss. You can safely ignore this message as the only ‘information’ you have lost is markup information (e.g. fonts, colours, items in bold, etc.) or formulas native to Excel (e.g. if you used Excel to calculate means, medians, etc.). In some cases you might also have options to choose what type of csv you would want to save the spreadsheet as. If so, opt for something along the lines of CSV UTF-8 (Comma-delimited) (.csv).\n\n\n\n\n\n\n\n\n\nDepending on the language settings of your operation system (e.g. Windows, MacOS, Linux) and language settings, csv files might look different. It is always a good idea to check your csv file in a plain text editor (e.g. Textedit on MacOS or Notepad on Windows). In case you do not see commas (,), but semicolons (;) you can apply a quick and dirty fix to your data by finding and replacing every ; with a , in the same that way we fixed our problematic white space characters in Excel.\n\n\n\n\n\n2.4.6.2 London population in 2021\nNow the 2011 data is prepared, we can move to the 2021 data:\n\nOpen the LSOA2021_population.xlsx in Excel. You will notice that the file is formatted largely the same as the LSOA2011_population.xlsx file, although if you were to look closely you will notice that the majority of London data are not at the top this time and that the number of top rows that we need to remove is not the same. To remedy this we can sort the data on the lsoa column (use: Data -&gt; Sort). This procedure should put the majority of London LSOAs at the top again.\nNow carry out the exact same steps you used to clean the 2011 population file to clean the 2021 population file. Save the file as csv into your data folder as LSOA2021_population.csv with the following column names: lsoa21_code, lsoa21_name, and pop2021.\n\n\n\n\n\n\n\nAgain make sure you did not miss any LSOAs. Once you are done cutting and pasting, you should have 4,995 rows of data in your second spreadsheet.\n\n\n\n\n\n\n2.4.7 Using QGIS to map the London population data\n\n2.4.7.1 Setting up a project\nWe will now use QGIS to create population maps for the LSOAs in London for both years. To achieve this, we need to join our table data to our spatial datasets and then map our populations for our visual analysis. Because, as we have seen above, we have issues with the number of LSOAs and changes in boundaries between the two Censuses, we will not (for now) complete any quantitative analysis of these population changes - this would require significant additional processing that we do not have time for today.\n\n\n\n\n\n\nData interoperability is a key issue that you will face in spatial analysis, particularly when it comes to Administrative Geographies.\n\n\n\n\nStart QGIS.\nClick on Project -&gt; New. Save your project as w2-pop-analysis. Remember to save your work throughout the practical.\nBefore we get started with adding data, we will first set the Coordinate Reference System of our Project. Click on Project -&gt; Properties – CRS. In the Filter box, type British National Grid. Select OSGB 1936 / British National Grid - EPSG:27700 and click Apply. Click OK.\n\n\n\n\n\n\n\nWe will explain CRSs and using CRSs in GIS software in more detail next week.\n\n\n\n\n\n2.4.7.2 Adding layers\nWe will first focus on loading and joining the 2011 datasets.\n\nClick on Layer -&gt; Add Layer -&gt; Add Vector Layer.\nWith File as your source type, click on the small three dots button and navigate to your 2011 boundary files.\nHere, we will select the LSOA2011.gpkg dataset. Highlight the file and click Open. Then click Add. You may need to close the box after adding the layer. The 2011 LSOA geography for England and Wales should now be loaded.\n\n\n\n\n\n\nFigure 2.6: 2011 LSOAs for England and Wales. [Enlarge image]\n\n\n\n\nWith the dataset loaded, we can now explore it in a little more detail. We first want to check out the Attribute Table of our dataset to see if we can filter out only the London LSOAs.\n\nRight-click on the LSOA2011 layer and open the Attribute Table and look at how the attributes are stored and presented in the table. Explore the different buttons in the Attribute Table and see if you can figure out what they mean.\nNow sort the Attribute Table on the LSOA11CD column so that all London-based LSOAs are at the top. Select the first 4,4642 rows.\n\n\n\n\n\n\n\nYou can select the first row, scroll down to the last row related to Westminster, hold the shift button on your keyboard, and click on the last row related to Westminster to select all rows that we need in one go.\n\n\n\n\n\n\n\n\nFigure 2.7: All 4,4642 London LSOAs selected. [Enlarge image]\n\n\n\n\n\nClose the Attribute Table. Right-click on the LSOA2011 layer and select Export -&gt; Save Selected Features As. Set Format to Geopackage and click on the small three dots button next to File name and navigate to your data/raw/boundaries folder. Save the file as LSOA2011_London.gpkg.\n\n\n\n\n\n\nFigure 2.8: Export the London LSOAs to a new file. [Enlarge image]\n\n\n\n\n\nYou can now untick the LSOA2011 containing all the LSOAs for England and Wales. Right-click on the LSOA2011_London layer and click on Zoom to Layer(s)."
  }
]